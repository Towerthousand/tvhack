function init(){var t="http://104.131.78.132:80/api/",e="u1";window.keyEnum={enter:13,rightArrow:39,leftArrow:37,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},document.body.className="";var n,o=function(t,e){navigator.setResolution&&navigator.setResolution(1280,720),navigator.setWebSecurityEnabled&&navigator.setWebSecurityEnabled(!1),window.onkeydown=this.handleControlKey,window.test=this,this.accordion={index:0},this.scope=t,this.state="",this.http=e,this.carers=[],this.inCall=!1;var n=this;this.stayAlive=setInterval(function(){n.populateCarers(),n.pingOnline(),n.populateCalling()},1e3),n.populateCarers(),n.pingOnline(),n.populateCalling()};o.prototype.populateCalling=function(){var n=this;this.http({method:"GET",url:t+"isCalling/"+e+"/"}).success(function(o,a,r,i){o.isCalling&&(n.inCall||(n.http({method:"GET",url:t+"uncall/"+e+"/"}),n.startCall()))})},o.prototype.startCall=function(){self.inCall=!0},o.prototype.endCall=function(){self.inCall=!1},o.prototype.populateCarers=function(){var n=this;this.http({method:"GET",url:t+"isCaredBy/"+e+"/"}).success(function(t,e,o,a){if(n.carers.length)for(var r=0;r<n.carers.length;r++)n.carers[r].active=t.users[r].active;else n.carers=t.users})},o.prototype.handleControlKey=function(t){var e=t.keyCode;if(console.log("bungy "+e),e==keyEnum.enter&&"accordion"==n.state){n.carers[n.accordion.index]}39==e&&(n.accordion.index=(n.carers.length+n.accordion.index+1)%n.carers.length),47==e&&(n.accordion.index=(n.carers.length+n.accordion.index-1)%n.carers.length,t.preventDefault()),40==e&&(n.state=n.state?"":"accordion",t.preventDefault()),n.scope.$apply()},o.prototype.pingOnline=function(){};var a=function(t){t.startSymbol("[["),t.endSymbol("]]")};angular.module("livesaver",[]).config(["$interpolateProvider",a]).controller("main",["$scope","$http",o]),angular.bootstrap(document.body,["livesaver"])}